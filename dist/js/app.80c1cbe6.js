(function(t){function e(e){for(var i,r,s=e[0],c=e[1],l=e[2],d=0,u=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(u.length)u.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"128f":function(t,e,n){"use strict";var i=n("4885"),a=n.n(i);a.a},"14b0":function(t,e,n){"use strict";var i=n("623a"),a=n.n(i);a.a},"19d2":function(t,e,n){},"2bf2":function(t,e,n){},3776:function(t,e,n){},4885:function(t,e,n){},"4c42":function(t,e,n){t.exports=n.p+"img/logo.ae432409.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d"),n("5363");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("AppTemplate",{attrs:{applicationName:"申請マネージャー",navigation:t.navigation}})],1)},o=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"application_wrapper"},[i("header",[i("span",{staticClass:"mdi navigation_control control",class:t.navigation_control_icon,on:{click:function(e){return t.toggle_navigation()}}}),i("img",{staticClass:"rotating_logo",attrs:{src:n("4c42"),alt:""}}),i("span",{staticClass:"application_name"},[t._v(t._s(t.applicationName))]),i("span",{staticClass:"mdi mdi-account aligned_right control",on:{click:function(e){return t.show_profile()}}}),i("span",{staticClass:"mdi mdi-logout control",on:{click:function(e){return t.logout()}}})]),i("div",{staticClass:"columns_wrapper"},[i("div",{staticClass:"nav_background",class:{visible:t.navigation_open},on:{click:function(e){return t.toggle_navigation()}}}),i("nav",{class:{open:t.navigation_open}},t._l(t.navigation,(function(e,n){return i("router-link",{key:n,attrs:{to:e.route}},[i("span",{staticClass:"mdi",class:"mdi-"+e.icon}),t._v("\n        "+t._s(e.label)+"\n      ")])})),1),i("main",[i("router-view",{staticClass:"router_view"}),i("footer",[i("img",{staticClass:"rotating_logo",attrs:{src:n("4c42"),alt:""}}),i("div",{staticClass:"application_info"},[i("div",{staticClass:"application_name"},[t._v(t._s(t.applicationName))]),i("div",{staticClass:"author_name"},[t._v("Maxime MOREILLON")])])])],1)])])},s=[],c={name:"AppTemplate",props:{applicationName:{type:String},navigation:{type:Array,default:function(){return[]}}},data:function(){return{navigation_open:!1}},methods:{toggle_navigation:function(){this.navigation_open=!this.navigation_open},show_profile:function(){window.location.href="http://employees.mike.jtekt.maximemoreillon.com/"},logout:function(){this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/logout").then((function(){return location.reload()})).catch((function(t){return console.log(t)}))}},computed:{navigation_control_icon:function(){return this.navigation_open?"mdi-backburger":"mdi-menu"}}},l=c,p=(n("fe0d"),n("2877")),d=Object(p["a"])(l,r,s,!1,null,null,null),u=d.exports,_={components:{AppTemplate:u},data:function(){return{navigation:[{route:"/create_application",label:"New",icon:"file-document-box-plus-outline"},{route:"/",label:"Outbox",icon:"inbox-arrow-up"},{route:"/received_applications",label:"Inbox",icon:"inbox-arrow-down"}]}}},m=_,f=Object(p["a"])(m,a,o,!1,null,null,null),v=f.exports,h=n("8c4f"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._v("\n\n  HOME\n\n")])},b=[],y={name:"home",components:{},data:function(){return{}},mounted:function(){},methods:{}},k=y,w=Object(p["a"])(k,g,b,!1,null,"d0711994",null),x=(w.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.create_application()}}},[n("EmployeePicker",{on:{employeeSelected:function(e){return t.add_to_recipients(e)}}}),n("ApprovalFlow",{attrs:{employees:t.recipients},on:{deleteEmployee:function(e){return t.delete_recipient(e)}}}),n("div",{staticClass:"type_and_title_input_wrapper section_wrapper"},[n("div",{},[n("label",[t._v("Application type")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"undefined"}},[t._v("Please select")]),t._l(t.types,(function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e))])}))],2)]),n("div",{},[n("label",[t._v("Title: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),n("div",{staticClass:"section_wrapper"},["undefined"!==t.type?n(t.type,{ref:"form",tag:"component"}):n("div",[t._v("Type not selected")])],1),n("div",{staticClass:"section_wrapper"},[n("input",{attrs:{type:"submit",disabled:"undefined"===t.type||t.recipients.length<1}})])],1)}),j=[],C=(n("6762"),n("2fdb"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"employee_picker"},[n("div",{staticClass:"employee_picker_column"},[t._m(0),n("div",{},t._l(t.divisions,(function(e){return n("CorporateStructureNode",{key:e._fields[0].identity.low,attrs:{nodeData:e,personalInformation:t.personal_information},on:{nodeSelected:function(e){return t.get_employees_belonging_to_node(e)}}})})),1)]),n("div",{staticClass:"employee_picker_column"},[t._m(1),n("div",{},[t.employees.length>0?n("table",{staticClass:"employee_table"},t._l(t.employees,(function(e){return n("tr",{key:e._fields[0].identity.low,on:{click:function(n){return t.$emit("employeeSelected",e)}}},[n("td",{staticClass:"name_cell"},[t._v(t._s(e._fields[0].properties.name_kanji))]),n("td",{staticClass:"employee_number_cell"},[t._v(t._s(e._fields[0].properties.employee_number))]),n("td",[n("span",{staticClass:"mdi mdi-account-search",on:{click:function(n){return n.stopPropagation(),t.show_profile_of(e._fields[0].properties.employee_number)}}})])])})),0):n("table",[t._m(2)])])])])}),$=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("span",{staticClass:"mdi mdi-account-group"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("span",{staticClass:"mdi mdi-account"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{},[t._v("No data")])])}],O=(n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"corporate_structure_node"},[n("div",{staticClass:"current_node_container"},[n("span",{staticClass:"expand_button mdi mdi-chevron-right",class:t.expand_button_class,on:{click:function(e){return t.toggle_node()}}}),n("span",{staticClass:"node_name_container",on:{click:function(e){return t.$emit("nodeSelected",t.nodeData._fields[0].identity.low)}}},[t._v("\n      "+t._s(t.nodeData._fields[0].properties.original_name)+"\n    ")])]),t.open?n("div",{staticClass:"children_container"},t._l(t.children,(function(e){return n("CorporateStructureNode",{key:e._fields[0].identity.low,attrs:{personalInformation:t.personalInformation,nodeData:e},on:{nodeSelected:function(e){return t.$emit("nodeSelected",e)}}})})),1):t._e()])}),E=[],P={name:"CorporateStructureNode",components:{CorporateStructureNode:S},props:{nodeData:Object,personalInformation:Object},data:function(){return{open:!1,children:[]}},mounted:function(){if(this.personalInformation){var t=this.nodeData._fields[0].labels[0],e=this.personalInformation._fieldLookup[t.toLowerCase()],n=this.personalInformation._fields[e];n.identity.low===this.nodeData._fields[0].identity.low&&this.open_node()}},methods:{open_node:function(){var t=this;this.open=!0,this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_units_directly_belonging_to_node",{node_id:this.nodeData._fields[0].identity.low}).then((function(e){return t.children=e.data})).catch((function(t){return console.log(t)}))},close_node:function(){this.open=!1},toggle_node:function(){this.open?this.close_node():this.open_node()}},computed:{expand_button_class:function(){return this.open?"chevron_open":"chevron_closed"}}},A=P,T=(n("6ff1"),Object(p["a"])(A,O,E,!1,null,"40475cee",null)),S=T.exports,N={name:"EmployeePicker",components:{CorporateStructureNode:S},data:function(){return{divisions:[],employees:[],personal_information:null}},mounted:function(){var t=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/personal_information_v2",{}).then((function(e){t.personal_information=e.data[0],t.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_all_divisions",{}).then((function(e){return t.divisions=e.data})).catch((function(t){return console.log(t)}))})).catch((function(t){return console.log(t)}))},methods:{get_employees_belonging_to_node:function(t){var e=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_employees_belonging_to_node",{node_id:t}).then((function(t){return e.employees=t.data.sort((function(t,e){return t._fields[0].properties.employee_number-e._fields[0].properties.employee_number}))})).catch((function(t){return console.log(t)}))},show_profile_of:function(t){window.open("http://employees.mike.jtekt.maximemoreillon.com/?employee_number="+String(t),"_blank")}},computed:{}},R=N,D=(n("ed2b"),Object(p["a"])(R,C,$,!1,null,"37b4053a",null)),I=D.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"approval_flow"},[t.employees.length>0?n("div",{staticClass:"actual_approval_flow"},t._l(t.employees,(function(e,i){return n("div",{key:e._fields[0].identity.low,staticClass:"flow_item"},[i>0?n("span",{staticClass:"arrow mdi mdi-arrow-right"}):t._e(),n("div",{staticClass:"employee"},[n("span",{staticClass:"delete_button mdi mdi-close",on:{click:function(e){return t.$emit("deleteEmployee",i)}}}),n("div",{staticClass:"name"},[t._v(t._s(e._fields[0].properties.name_kanji))]),n("div",{staticClass:"name"},[t._v("("+t._s(e._fields[0].properties.role)+")")])])])})),0):n("div",{staticClass:"flow_empty"},[t._v("\n    Flow empty\n  ")])])},B=[],M={name:"ApprovalFlow",props:{employees:Array}},q=M,F=(n("14b0"),Object(p["a"])(q,L,B,!1,null,"30b5fcf1",null)),H=F.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("tr",[n("td",[t._v("パソコン No.")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.computer_number,expression:"form_data.computer_number"}],attrs:{type:"text"},domProps:{value:t.form_data.computer_number},on:{input:function(e){e.target.composing||t.$set(t.form_data,"computer_number",e.target.value)}}})])]),n("tr",[n("td",[t._v("利用場所持出先")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.destination,expression:"form_data.destination"}],attrs:{type:"text"},domProps:{value:t.form_data.destination},on:{input:function(e){e.target.composing||t.$set(t.form_data,"destination",e.target.value)}}})]),n("tr",[n("td",[t._v("使用目的")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.reason,expression:"form_data.reason"}],attrs:{type:"text"},domProps:{value:t.form_data.reason},on:{input:function(e){e.target.composing||t.$set(t.form_data,"reason",e.target.value)}}})]),n("tr",[n("td",[t._v("持出定日")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.take_out_date,expression:"form_data.take_out_date"}],attrs:{type:"text"},domProps:{value:t.form_data.take_out_date},on:{input:function(e){e.target.composing||t.$set(t.form_data,"take_out_date",e.target.value)}}})]),n("tr",[n("td",[t._v("返却予定日")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.intended_return_date,expression:"form_data.intended_return_date"}],attrs:{type:"text"},domProps:{value:t.form_data.intended_return_date},on:{input:function(e){e.target.composing||t.$set(t.form_data,"intended_return_date",e.target.value)}}})])])])},W=[],U={name:"PcTakeOut",data:function(){return{form_data:{computer_number:"",destination:"",reason:"",take_out_date:"",intended_return_date:""}}}},J=U,X=Object(p["a"])(J,z,W,!1,null,null,null),G=X.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("tr",[n("td",[t._v("Submitted applications")]),n("td",t._l(t.takeout_applications,(function(e){return n("div",{staticClass:"past_takeout_application"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.referred_application_id,expression:"referred_application_id"}],attrs:{type:"radio"},domProps:{value:e._fields[0].identity.low,checked:t._q(t.referred_application_id,e._fields[0].identity.low)},on:{change:function(n){t.referred_application_id=e._fields[0].identity.low}}}),t._l(JSON.parse(e._fields[0].properties.form_data),(function(e,i){return n("div",[t._v("\n            "+t._s(i)+": "+t._s(e)+"\n          ")])})),n("button",{on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.see_application(e._fields[0].identity.low)}}},[t._v("SEE")])],2)})),0)])])])},Q=[],V=(n("ac6a"),{name:"PcBringBack",data:function(){return{takeout_applications:[],form_data:{takeout_application_id:""},referred_application_id:null}},mounted:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/approved",{}).then((function(e){t.takeout_applications.splice(0,t.takeout_applications.length),e.data.records.forEach((function(e){"PcTakeOut"===e._fields[0].properties.type&&t.takeout_applications.push(e)}))})).catch((function(t){return console.log(t)}))},methods:{see_application:function(t){window.open("http://shinseimanager.mike.jtekt.maximemoreillon.com/show_application?id="+t)}}}),Y=V,Z=(n("ed57"),Object(p["a"])(Y,K,Q,!1,null,"f518acac",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[t._v("Test field")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.test_field,expression:"form_data.test_field"}],attrs:{type:"text"},domProps:{value:t.form_data.test_field},on:{input:function(e){e.target.composing||t.$set(t.form_data,"test_field",e.target.value)}}})])},nt=[],it={name:"TestForm",data:function(){return{form_data:{test_field:""}}}},at=it,ot=Object(p["a"])(at,et,nt,!1,null,null,null),rt=ot.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"file_input",attrs:{type:"file"},on:{change:function(e){return t.upload_file()}}})])},ct=[],lt={name:"Report",data:function(){return{form_data:{report_file:""}}},methods:{upload_file:function(){var t=this,e=new FormData;e.append("file_to_upload",this.$refs.file_input.files[0]),this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/file_upload",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.form_data.report_file=e.data})).catch((function(t){return console.log(t)}))}}},pt=lt,dt=Object(p["a"])(pt,st,ct,!1,null,null,null),ut=dt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",[n("tr",[n("td",[t._v("Description")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.description,expression:"form_data.description"}],attrs:{type:"text"},domProps:{value:t.form_data.description},on:{input:function(e){e.target.composing||t.$set(t.form_data,"description",e.target.value)}}})])]),n("tr",[n("td",[t._v("vendor")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.vendor,expression:"form_data.vendor"}],attrs:{type:"text"},domProps:{value:t.form_data.vendor},on:{input:function(e){e.target.composing||t.$set(t.form_data,"vendor",e.target.value)}}})])]),n("tr",[n("td",[t._v("amount")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.amount,expression:"form_data.amount"}],attrs:{type:"text"},domProps:{value:t.form_data.amount},on:{input:function(e){e.target.composing||t.$set(t.form_data,"amount",e.target.value)}}})])]),n("tr",[n("td",[t._v("Taxe include")]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form_data.x_included,expression:"form_data.x_included"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(t.form_data.x_included)?t._i(t.form_data.x_included,null)>-1:t.form_data.x_included},on:{change:function(e){var n=t.form_data.x_included,i=e.target,a=!!i.checked;if(Array.isArray(n)){var o=null,r=t._i(n,o);i.checked?r<0&&t.$set(t.form_data,"x_included",n.concat([o])):r>-1&&t.$set(t.form_data,"x_included",n.slice(0,r).concat(n.slice(r+1)))}else t.$set(t.form_data,"x_included",a)}}})])])])])},mt=[],ft={name:"PcTakeOut",data:function(){return{form_data:{description:"",vendor:"",amount:"",tax_included:""}}}},vt=ft,ht=Object(p["a"])(vt,_t,mt,!1,null,null,null),gt=ht.exports,bt={name:"EditApplication",components:{EmployeePicker:I,ApprovalFlow:H,PcTakeOut:G,TestForm:rt,Report:ut,PcBringBack:tt,ReceiptPurchaseBefore:gt},data:function(){return{types:["PcTakeOut","PcBringBack","TestForm","Report","ReceiptPurchaseBefore"],type:"PcTakeOut",title:"",recipients:[],company_structure:[],employees:[],selected_employee:null}},mounted:function(){},methods:{create_application:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/create_application",{type:this.type,title:this.title,recipients_employee_number:this.recipients.map((function(t){return t._fields[0].properties.employee_number})),session_id:this.$store.state.session_id,form_data:this.$refs.form._data.form_data,referred_application_id:this.$refs.form._data.referred_application_id}).then((function(e){return t.$router.push({name:"submitted_applications"})})).catch((function(t){return console.log(t)}))},get_employees_belonging_to_node:function(t){var e=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_employees_belonging_to_node",{node_id:t}).then((function(t){return e.employees=t.data})).catch((function(t){return console.log(t)}))},delete_recipient:function(t){this.recipients.splice(t,1)},add_to_recipients:function(t){this.recipients.includes(t)?alert("Duplicats not allowed"):(this.recipients.push(t),t.flow_index=this.recipients.length-1)}}},yt=bt,kt=(n("81a3"),Object(p["a"])(yt,x,j,!1,null,"b0dd3548",null)),wt=kt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"show_application"},[t.application?n("div",{staticClass:"application_container"},[n("div",{staticClass:"application_info"},[n("table",{},[t._m(0),n("tr",[n("td",[t._v("ID")]),n("td",[t._v(t._s(t.application.identity.low))])]),n("tr",[n("td",[t._v("Type")]),n("td",[t._v(t._s(t.application.properties.type))])]),n("tr",[n("td",[t._v("Date")]),n("td",[t._v("\n            "+t._s(t.application.properties.creation_date.year.low)+"/"+t._s(t.application.properties.creation_date.month.low)+"/"+t._s(t.application.properties.creation_date.day.low)+"\n          ")])]),n("tr",[n("td",[t._v("Applicant")]),n("td",[t._v(t._s(t.applicant.properties.name_kanji)+" ("+t._s(t.applicant.properties.employee_number)+")")])]),t._m(1),t._l(JSON.parse(t.application.properties.form_data),(function(e,i){return n("tr",[n("td",[t._v(t._s(i))]),n("td","report_file"===i?[n("a",{attrs:{href:"http://webhanko.mike.jtekt.maximemoreillon.com/uploads/"+e}},[t._v("download")])]:[t._v(t._s(e))])])})),t._m(2),n("tr",[n("td",{attrs:{colspan:"2"}},[t.applicant.properties.employee_number===this.$store.state.employee_number?n("button",{attrs:{type:"button"},on:{click:function(e){return t.delete_application(t.application.identity.low)}}},[t._v("\n              Bye bye!\n            ")]):t._e()])])],2)]),n("div",{staticClass:"hanko_container_container"},t._l(t.application_records,(function(e,i){return n("div",{staticClass:"hanko_container_container_intermediate_wrapper"},[i>0?n("span",{staticClass:"arrow mdi mdi-arrow-left"}):t._e(),n("WebHankoContainer",{attrs:{applicationRecord:e},on:{approve:function(e){return t.approve(t.application.identity.low)},reject:function(e){return t.reject(t.application.identity.low)},cancel:function(e){return t.cancel(t.application.identity.low)}}})],1)})),0)]):n("div",{},[t._v("\n    Application does not exist\n  ")])])},jt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",{attrs:{colspan:"2"}},[t._v("申請情報")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",{attrs:{colspan:"2"}},[t._v("申請内容")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",{attrs:{colspan:"2"}},[t._v("Actions")])])}],Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"web_hanko_container"},[n("div",{staticClass:"hanko_container_header",on:{click:function(e){return t.view_profile(t.recipient.properties.employee_number)}}},[t._v("\n    "+t._s(t.recipient.properties.family_name_kanji)+"\n  ")]),n("div",{staticClass:"hanko_area"},[t.approval?n("WebHanko",{attrs:{name:t.recipient.properties.family_name_kanji,approvalId:t.approval.identity.low,date:t.approval.properties.date}}):t.rejection?n("Rejection"):t._e()],1),t.show_toolbox?n("div",{staticClass:"toolbox"},[t.show_approval_controls?n("div",{staticClass:"approval_controls"},[n("span",{staticClass:"mdi mdi-check approve_button",on:{click:function(e){return t.$emit("approve")}}}),n("span",{staticClass:"mdi mdi-close disapprove_button",on:{click:function(e){return t.$emit("reject")}}})]):n("div",{staticClass:"approval_controls"},[n("span",{staticClass:"mdi mdi-cancel cancel_button",on:{click:function(e){return t.$emit("cancel")}}})])]):t._e()])},$t=[],Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"web_hanko"},[n("svg",{ref:"svg",attrs:{viewBox:"0 0 100 150"}},[n("rect",{attrs:{stroke:"#c00000","stroke-width":"2","fill-opacity":"0.0",x:"2%",y:"2%",rx:"10",ry:"10",width:"96%",height:"96%"}}),n("text",{attrs:{fill:"#c00000","text-anchor":"middle","font-family":"monospace, monospace","font-weight":"600","font-size":t.name_font_size,x:"50%",y:"20%"}},[t._v("\n      "+t._s(t.name)+"\n    ")]),n("path",{attrs:{d:t.qr_code_svg,stroke:"#c00000",transform:"\n        scale(3.80952380952)\n        translate(2.625,10.5)\n      "}}),n("line",{attrs:{stroke:"#c00000","stroke-width":"1",x1:"5%",y1:"36",x2:"95%",y2:"36"}}),n("line",{attrs:{stroke:"#c00000","stroke-width":"1",x1:"5%",y1:"125",x2:"95%",y2:"125"}}),n("text",{attrs:{fill:"#c00000","text-anchor":"middle","font-family":"monospace, monospace","font-size":"90%",x:"50%",y:"94%"}},[t._v("\n      "+t._s(String(t.date.year.low).slice(2,4))+"."+t._s(t.date.month.low)+"."+t._s(t.date.day.low)+"\n    ")])]),n("div",{staticClass:"web_hanko_actions_container"},[n("span",{staticClass:"mdi mdi-download",on:{click:function(e){return t.download()}}})])])},Et=[],Pt=(n("a481"),n("7f7f"),n("6b54"),n("c5f6"),n("d055")),At=n.n(Pt),Tt={name:"WebHanko",props:{name:{type:String,default:"AA"},approvalId:{type:Number,required:!1},date:{type:Object,default:function(){return{year:{low:2e3},month:{low:1},day:{low:1}}}}},data:function(){return{qr_code_svg:""}},mounted:function(){var t=this;At.a.toString(String(this.approvalId),{margin:0,color:{dark:"#C00000",light:"#0000"}}).then((function(e){var n=new DOMParser,i=n.parseFromString(e,"image/svg+xml");t.qr_code_svg=i.getElementsByTagName("path")[0].getAttribute("d")})).catch((function(t){return console.error(t)}))},computed:{name_font_size:function(){return 55/this.name.length}},methods:{download:function(){var t=this.$refs.svg,e=document.createElement("canvas");e.width=1e3,e.height=1500;var n=e.getContext("2d"),i=(new XMLSerializer).serializeToString(t),a=window.URL||window.webkitURL||window,o=new Image,r=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),s=a.createObjectURL(r);o.onload=function(){n.drawImage(o,0,0),a.revokeObjectURL(s);var t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),i=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),r=document.createElement("a");r.setAttribute("download","approval_qr.png"),r.setAttribute("href",t),r.setAttribute("target","_blank"),r.dispatchEvent(i)},o.src=s}}},St=Tt,Nt=(n("ad05"),Object(p["a"])(St,Ot,Et,!1,null,"ca41d9d4",null)),Rt=Nt.exports,Dt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},It=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rejection"},[n("span",{staticClass:"mdi mdi-close-circle-outline"})])}],Lt={name:"Rejection"},Bt=Lt,Mt=(n("6a4b"),Object(p["a"])(Bt,Dt,It,!1,null,"1d7146f7",null)),qt=Mt.exports,Ft={name:"WebHankoContainer",components:{WebHanko:Rt,Rejection:qt},props:{applicationRecord:{type:Object,required:!0}},data:function(){return{approval_status:void 0}},methods:{view_profile:function(t){window.location.href="http://employees.mike.jtekt.maximemoreillon.com/?employee_number="+t}},computed:{recipient:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["recipient"]]},approval:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["approval"]]},rejection:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["rejection"]]},show_toolbox:function(){return this.$store.state.employee_number===this.recipient.properties.employee_number},show_approval_controls:function(){return!this.approval&&!this.rejection}}},Ht=Ft,zt=(n("128f"),Object(p["a"])(Ht,Ct,$t,!1,null,"563bdba8",null)),Wt=zt.exports,Ut={name:"ShowApplication",components:{WebHankoContainer:Wt},mounted:function(){this.get_application()},data:function(){return{application_records:[]}},methods:{get_application:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_application",{application_id:this.$route.query.id}).then((function(e){return t.application_records=e.data})).catch((function(t){return console.log(t)}))},delete_application:function(t){var e=this;confirm("ホンマ？")&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/delete_application",{application_id:t}).then((function(){return e.get_application()})).catch((function(t){return console.log(t)}))},approve:function(t){var e=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/approve_application",{application_id:t}).then((function(){return e.get_application()})).catch((function(t){return console.log(t)}))},reject:function(t){var e=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/reject_application",{application_id:t}).then((function(){return e.get_application()})).catch((function(t){return console.log(t)}))},cancel:function(t){var e=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/cancel_decision",{application_id:t}).then((function(){return e.get_application()})).catch((function(t){return console.log(t)}))}},computed:{application:function(){return this.application_records.length>0?this.application_records[0]._fields[this.application_records[0]._fieldLookup["application"]]:null},applicant:function(){return this.application_records.length>0?this.application_records[0]._fields[this.application_records[0]._fieldLookup["applicant"]]:null}}},Jt=Ut,Xt=(n("63d2"),Object(p["a"])(Jt,xt,jt,!1,null,"6d7b68b6",null)),Gt=Xt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"submitted_applications"},[n("h3",[t._v("Pending")]),n("ApplicationTable",{attrs:{applications:t.applications.pending}}),n("h3",[t._v("Rejected")]),n("ApplicationTable",{attrs:{applications:t.applications.rejected}}),n("h3",[t._v("Approved")]),n("ApplicationTable",{attrs:{applications:t.applications.approved}})],1)},Qt=[],Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"application_table_container"},[t.applications.length>0?n("table",{staticClass:"application_table"},[t._m(0),t._l(t.applications,(function(e){return n("tr",{on:{click:function(n){return t.see_application(e._fields[0].identity.low)}}},[n("td",[t._v(t._s(e._fields[0].identity.low))]),n("td",[t._v(t._s(t.formatted_date(e)))]),n("td",[t._v(t._s(e._fields[0].properties.type))]),n("td",[t._v(t._s(e._fields[0].properties.title))])])}))],2):n("div",{},[t._v("\n    No data\n  ")])])},Yt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"headers_row"},[n("th",[t._v("ID")]),n("th",[t._v("Date")]),n("th",[t._v("Type")]),n("th",[t._v("Title")])])}],Zt={name:"ApplicationTable",props:{applications:Array},methods:{see_application:function(t){this.$router.push({name:"show_application",query:{id:t}})},formatted_date:function(t){return t._fields[0].properties.creation_date.year.low+"/"+t._fields[0].properties.creation_date.month.low+"/"+t._fields[0].properties.creation_date.day.low+"/"}},computed:{}},te=Zt,ee=(n("bff0"),Object(p["a"])(te,Vt,Yt,!1,null,"7e5c0108",null)),ne=ee.exports,ie={name:"SubmittedApplications",components:{ApplicationTable:ne},data:function(){return{applications:{pending:[],rejected:[],approved:[]}}},mounted:function(){this.get_all_submitted_applications()},methods:{get_all_submitted_applications:function(){this.get_submitted_applications_pending(),this.get_submitted_applications_approved(),this.get_submitted_applications_rejected()},get_submitted_applications_rejected:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/rejected",{}).then((function(e){return t.applications.rejected=e.data.records})).catch((function(t){return console.log(t)}))},get_submitted_applications_approved:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/approved",{}).then((function(e){return t.applications.approved=e.data.records})).catch((function(t){return console.log(t)}))},get_submitted_applications_pending:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/pending",{}).then((function(e){return t.applications.pending=e.data.records})).catch((function(t){return console.log(t)}))}}},ae=ie,oe=Object(p["a"])(ae,Kt,Qt,!1,null,"73f0407e",null),re=oe.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"received applications"},[n("h3",[t._v("Pending")]),n("ApplicationTable",{attrs:{applications:t.applications.pending}}),n("h3",[t._v("Rejected")]),n("ApplicationTable",{attrs:{applications:t.applications.rejected}}),n("h3",[t._v("Approved")]),n("ApplicationTable",{attrs:{applications:t.applications.approved}})],1)},ce=[],le={name:"ReceivedApplications",components:{ApplicationTable:ne},data:function(){return{applications:{pending:[],rejected:[],approved:[]}}},mounted:function(){this.get_all_submitted_applications()},methods:{get_all_submitted_applications:function(){this.get_submitted_applications_pending(),this.get_submitted_applications_approved(),this.get_submitted_applications_rejected()},get_submitted_applications_rejected:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_received_applications/rejected",{}).then((function(e){return t.applications.rejected=e.data.records})).catch((function(t){return console.log(t)}))},get_submitted_applications_approved:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_received_applications/approved",{}).then((function(e){return t.applications.approved=e.data.records})).catch((function(t){return console.log(t)}))},get_submitted_applications_pending:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_received_applications/pending",{}).then((function(e){return t.applications.pending=e.data.records})).catch((function(t){return console.log(t)}))}}},pe=le,de=Object(p["a"])(pe,se,ce,!1,null,"1f73e56c",null),ue=de.exports;i["a"].use(h["a"]);var _e=new h["a"]({mode:"history",base:"",routes:[{path:"/create_application",name:"create_application",component:wt},{path:"/",name:"submitted_applications",component:re},{path:"/received_applications",name:"received_applications",component:ue},{path:"/show_application",name:"show_application",component:Gt}]}),me=n("2f62");i["a"].use(me["a"]);var fe=new me["a"].Store({state:{employee_number:""},mutations:{set_employee_number:function(t,e){t.employee_number=e}},actions:{}}),ve=n("bc3a"),he=n.n(ve),ge=n("a7fe"),be=n.n(ge);he.a.defaults.withCredentials=!0,he.a.defaults.crossDomain=!0,i["a"].use(be.a,he.a),i["a"].config.productionTip=!1,_e.beforeEach((function(t,e,n){he.a.post("http://authentication.mike.jtekt.maximemoreillon.com/status").then((function(t){t.data.logged_in?(fe.commit("set_employee_number",t.data.employee_number),n()):window.location.href="http://authentication.mike.jtekt.maximemoreillon.com/"})).catch((function(t){return console.log(t)}))})),new i["a"]({router:_e,store:fe,render:function(t){return t(v)}}).$mount("#app")},6025:function(t,e,n){},"623a":function(t,e,n){},"63d2":function(t,e,n){"use strict";var i=n("aebf"),a=n.n(i);a.a},"6a4b":function(t,e,n){"use strict";var i=n("a1a5"),a=n.n(i);a.a},"6ff1":function(t,e,n){"use strict";var i=n("19d2"),a=n.n(i);a.a},"81a3":function(t,e,n){"use strict";var i=n("6025"),a=n.n(i);a.a},a1a5:function(t,e,n){},ad05:function(t,e,n){"use strict";var i=n("f7c7"),a=n.n(i);a.a},aebf:function(t,e,n){},bff0:function(t,e,n){"use strict";var i=n("de8f"),a=n.n(i);a.a},de8f:function(t,e,n){},ed2b:function(t,e,n){"use strict";var i=n("2bf2"),a=n.n(i);a.a},ed57:function(t,e,n){"use strict";var i=n("f35e"),a=n.n(i);a.a},f35e:function(t,e,n){},f7c7:function(t,e,n){},fe0d:function(t,e,n){"use strict";var i=n("3776"),a=n.n(i);a.a}});
//# sourceMappingURL=app.80c1cbe6.js.map