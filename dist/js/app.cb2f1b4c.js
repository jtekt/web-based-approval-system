(function(t){function e(e){for(var n,r,l=e[0],s=e[1],c=e[2],u=0,d=[];u<l.length;u++)r=l[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);p&&p(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,l=1;l<i.length;l++){var s=i[l];0!==a[s]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={app:0},o=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var p=s;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0450":function(t,e,i){"use strict";var n=i("ad38"),a=i.n(n);a.a},"206e":function(t,e,i){"use strict";var n=i("2c1f"),a=i.n(n);a.a},2365:function(t,e,i){"use strict";var n=i("e602"),a=i.n(n);a.a},"277d":function(t,e,i){"use strict";var n=i("2b63"),a=i.n(n);a.a},"2b63":function(t,e,i){},"2c1f":function(t,e,i){},3776:function(t,e,i){},"4c42":function(t,e,i){t.exports=i.p+"img/logo.ae432409.svg"},"51dc":function(t,e,i){"use strict";var n=i("b8cc"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d"),i("5363");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("AppTemplate",{attrs:{applicationName:"申請マネージャー",navigation:t.navigation}})],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"application_wrapper"},[n("header",[t.navigation.length>0?n("span",{staticClass:"mdi navigation_control control",class:t.navigation_control_icon,on:{click:function(e){return t.toggle_navigation()}}}):t._e(),n("img",{staticClass:"rotating_logo",attrs:{src:i("4c42"),alt:""}}),n("span",{staticClass:"application_name"},[t._v(t._s(t.applicationName))]),n("span",{staticClass:"mdi mdi-account aligned_right control",on:{click:function(e){return t.show_profile()}}}),n("span",{staticClass:"mdi mdi-logout control",on:{click:function(e){return t.logout()}}})]),n("div",{staticClass:"columns_wrapper"},[n("div",{staticClass:"nav_background",class:{visible:t.navigation_open},on:{click:function(e){return t.toggle_navigation()}}}),t.navigation.length>0?n("nav",{class:{open:t.navigation_open}},t._l(t.navigation,(function(e,i){return n("router-link",{key:i,attrs:{to:e.route}},[n("span",{staticClass:"mdi",class:"mdi-"+e.icon}),t._v("\n        "+t._s(e.label)+"\n      ")])})),1):t._e(),n("main",[t.slotted?t._t("default"):n("router-view",{staticClass:"view"}),n("footer",[n("img",{staticClass:"rotating_logo",attrs:{src:i("4c42"),alt:""}}),n("div",{staticClass:"application_info"},[n("div",{staticClass:"application_name"},[t._v(t._s(t.applicationName))]),n("div",{staticClass:"author_name"},[t._v("Maxime MOREILLON")])])])],2)])])},l=[],s={name:"AppTemplate",props:{applicationName:{type:String},slotted:{type:Boolean,default:function(){return!1}},navigation:{type:Array,default:function(){return[]}}},data:function(){return{navigation_open:!1}},methods:{toggle_navigation:function(){this.navigation_open=!this.navigation_open},show_profile:function(){window.location.href="http://employees.mike.jtekt.maximemoreillon.com/"},logout:function(){this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/logout").then((function(){return location.reload()})).catch((function(t){return console.log(t)}))}},computed:{navigation_control_icon:function(){return this.navigation_open?"mdi-backburger":"mdi-menu"}}},c=s,p=(i("fe0d"),i("2877")),u=Object(p["a"])(c,r,l,!1,null,null,null),d=u.exports,_={components:{AppTemplate:d},data:function(){return{navigation:[{route:"/",label:"Outbox",icon:"inbox-arrow-up"},{route:"/received_applications",label:"Inbox",icon:"inbox-arrow-down"},{route:"/application_template_list",label:"Forms creator",icon:"file-settings-outline"},{route:"/search",label:"Search",icon:"magnify"}]}}},m=_,f=Object(p["a"])(m,a,o,!1,null,null,null),h=f.exports,v=i("8c4f"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("EmployeePicker",{on:{employeeSelected:function(e){return t.add_to_recipients(e)}}}),i("ApprovalFlow",{attrs:{employees:t.recipients},on:{deleteEmployee:function(e){return t.delete_recipient(e)}}}),i("div",{staticClass:"type_and_title_input_wrapper section_wrapper"},[i("div",{staticClass:"title_wrapper"},[i("label",[t._v("申請タイトル / Title of the application: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"title_input",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),i("div",{},[i("label",[t._v("申請種類 / Application type: ")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_form,expression:"selected_form"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selected_form=e.target.multiple?i:i[0]}}},t._l(t.application_types_user_created,(function(e){return i("option",{domProps:{value:e}},[t._v("\n          "+t._s(e._fields[0].properties.label)+"\n        ")])})),0)])]),i("div",{staticClass:"section_wrapper form_container"},[t.selected_form?i("div",{},[i("div",{staticClass:"form_title"},[t._v(t._s(t.selected_form._fields[t.selected_form._fieldLookup["aft"]].properties.label))]),i("table",{staticClass:"form_content_table"},t._l(t.selected_form._fields[t.selected_form._fieldLookup["aft"]].properties.fields,(function(e,n){return i("tr",[i("td",[t._v(t._s(e.label))]),i("td",["file"!==e.type||e.value?"file"===e.type&&e.value?i("span",{staticClass:"mdi mdi-delete file_delete_button",on:{click:function(i){return t.delete_file(e)}}}):"date"===e.type?i("datepicker",{model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"field.value"}}):"checkbox"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"field.value"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.value)?t._i(e.value,null)>-1:e.value},on:{change:function(i){var n=e.value,a=i.target,o=!!a.checked;if(Array.isArray(n)){var r=null,l=t._i(n,r);a.checked?l<0&&t.$set(e,"value",n.concat([r])):l>-1&&t.$set(e,"value",n.slice(0,l).concat(n.slice(l+1)))}else t.$set(e,"value",o)}}}):"radio"===e.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"field.value"}],attrs:{type:"radio"},domProps:{checked:t._q(e.value,null)},on:{change:function(i){return t.$set(e,"value",null)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"field.value"}],attrs:{type:e.type},domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}}):i("input",{attrs:{type:e.type},on:{change:function(i){return t.file_upload(i,e)}}})],1)])})),0),i("div",{staticClass:"form_author"},[t._v("\n        Form made by "+t._s(t.selected_form._fields[t.selected_form._fieldLookup["creator"]].properties.name_kanji)+"\n        ("+t._s(t.selected_form._fields[t.selected_form._fieldLookup["creator"]].properties.email_address)+")\n      ")])]):i("div",[t._v("申請種類が選ばれていません / Application type not selected")])]),i("div",{staticClass:"submit_button_container"},[i("span",{staticClass:"mdi mdi-send submit_button",class:{disabled:!t.form_valid},on:{click:function(e){return t.create_application()}}},[t._v(" Send")])])],1)},g=[],y=(i("6762"),i("2fdb"),i("768b")),k=(i("ac4d"),i("8a81"),i("7514"),i("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"employee_picker"},[i("div",{staticClass:"employee_picker_column"},[t._m(0),i("div",{},t._l(t.divisions,(function(e){return i("CorporateStructureNode",{key:e._fields[0].identity.low,attrs:{nodeData:e,personalInformation:t.personal_information},on:{nodeSelected:function(e){return t.get_employees_belonging_to_node(e)}}})})),1)]),i("div",{staticClass:"employee_picker_column"},[t._m(1),i("div",{},[t.employees.length>0?i("table",{staticClass:"employee_table"},t._l(t.employees,(function(e){return i("tr",{key:e._fields[0].identity.low,on:{click:function(i){return t.$emit("employeeSelected",e)}}},[i("td",{staticClass:"name_cell"},[t._v(t._s(e._fields[0].properties.name_kanji))]),i("td",{staticClass:"employee_number_cell"},[t._v(t._s(e._fields[0].properties.employee_number))]),i("td",[i("span",{staticClass:"mdi mdi-account-search",on:{click:function(i){return i.stopPropagation(),t.show_profile_of(e._fields[0].properties.employee_number)}}})])])})),0):i("table",[t._m(2)])])])])}),w=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("span",{staticClass:"mdi mdi-account-group"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("span",{staticClass:"mdi mdi-account"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{},[t._v("No data")])])}],x=(i("55dd"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"corporate_structure_node"},[i("div",{staticClass:"current_node_container"},[i("span",{staticClass:"expand_button mdi mdi-chevron-right",class:t.expand_button_class,on:{click:function(e){return t.toggle_node()}}}),i("span",{staticClass:"node_name_container",on:{click:function(e){return t.$emit("nodeSelected",t.nodeData._fields[0])}}},[t._v("\n      "+t._s(t.nodeData._fields[0].properties.original_name)+"\n    ")])]),t.open?i("div",{staticClass:"children_container"},t._l(t.children,(function(e){return i("CorporateStructureNode",{key:e._fields[0].identity.low,attrs:{personalInformation:t.personalInformation,nodeData:e},on:{nodeSelected:function(e){return t.$emit("nodeSelected",e)}}})})),1):t._e()])}),C=[],j={name:"CorporateStructureNode",components:{CorporateStructureNode:E},props:{nodeData:Object,personalInformation:Object},data:function(){return{open:!1,children:[]}},mounted:function(){if(this.personalInformation){var t=this.nodeData._fields[0].labels[0],e=this.personalInformation._fieldLookup[t.toLowerCase()],i=this.personalInformation._fields[e];i.identity.low===this.nodeData._fields[0].identity.low&&this.open_node()}},methods:{open_node:function(){var t=this;this.open=!0,this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_units_directly_belonging_to_node",{node_id:this.nodeData._fields[0].identity.low}).then((function(e){return t.children=e.data})).catch((function(t){return console.log(t)}))},close_node:function(){this.open=!1},toggle_node:function(){this.open?this.close_node():this.open_node()}},computed:{expand_button_class:function(){return this.open?"chevron_open":"chevron_closed"}}},A=j,$=(i("d1d1"),Object(p["a"])(A,x,C,!1,null,"ea6d19aa",null)),E=$.exports,L={name:"EmployeePicker",components:{CorporateStructureNode:E},data:function(){return{divisions:[],employees:[],personal_information:null}},mounted:function(){var t=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/personal_information_v2",{}).then((function(e){t.personal_information=e.data[0],t.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_all_divisions",{}).then((function(e){return t.divisions=e.data})).catch((function(t){return console.log(t)}))})).catch((function(t){return console.log(t)}))},methods:{get_employees_belonging_to_node:function(t){var e=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_employees_belonging_to_node",{node_id:t.identity.low}).then((function(t){return e.employees=t.data.sort((function(t,e){return t._fields[0].properties.employee_number-e._fields[0].properties.employee_number}))})).catch((function(t){return console.log(t)}))},show_profile_of:function(t){window.open("http://employees.mike.jtekt.maximemoreillon.com/?employee_number="+String(t),"_blank")}},computed:{}},O=L,S=(i("0450"),Object(p["a"])(O,k,w,!1,null,"a1c58364",null)),D=S.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"approval_flow"},[t._m(0),t.employees.length>0?i("draggable",{staticClass:"actual_approval_flow",attrs:{list:t.employees}},t._l(t.employees,(function(e,n){return i("div",{key:e._fields[0].identity.low,staticClass:"flow_item"},[n>0?i("span",{staticClass:"arrow mdi mdi-arrow-right"}):t._e(),i("div",{staticClass:"employee"},[i("span",{staticClass:"delete_button mdi mdi-close",on:{click:function(e){return t.$emit("deleteEmployee",n)}}}),i("div",{staticClass:"name"},[t._v(t._s(e._fields[0].properties.name_kanji))]),i("div",{staticClass:"name"},[t._v("("+t._s(e._fields[0].properties.role)+")")])])])})),0):i("div",{staticClass:"flow_empty"},[t._v("\n    承認者が選ばれていません　/　No recipient selected\n  ")])],1)},R=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"approval_flow_header"},[i("span",{staticClass:"mdi mdi-account"}),i("span",{staticClass:"mdi mdi-arrow-right"}),i("span",{staticClass:"mdi mdi-account"}),i("span",{staticClass:"mdi mdi-arrow-right"}),i("span",{staticClass:"mdi mdi-account"})])}],N=i("310e"),q=i.n(N),P={name:"ApprovalFlow",components:{draggable:q.a},props:{employees:Array}},I=P,M=(i("7a05"),Object(p["a"])(I,T,R,!1,null,"5967c5a7",null)),F=M.exports,H=i("fa33"),B={name:"CreateApplication",components:{EmployeePicker:D,ApprovalFlow:F,Datepicker:H["a"]},data:function(){return{title:"",recipients:[],application_types_user_created:[],selected_form:void 0}},mounted:function(){this.get_templates()},methods:{copy_content_if_duplicate:function(){var t=this;this.$route.query.copy_of&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_application",{application_id:this.$route.query.copy_of}).then((function(e){var i=e.data[0]._fields[0].properties;i.form_data=JSON.parse(i.form_data),t.title="Copy of "+i.title,e.data.reverse().forEach((function(e){t.recipients.push({_fields:[e._fields[e._fieldLookup["recipient"]]]})}));var n=e.data[0]._fields[e.data[0]._fieldLookup["aft"]];if(!n)return alert("Form template does not exist");n.properties.fields=JSON.parse(n.properties.fields);var a=t.application_types_user_created.find((function(t){return t._fields[t._fieldLookup["aft"]].identity.low===n.identity.low}));if(!a)return alert("Form template does not exist");t.selected_form=a;var o=t.selected_form._fields[t.selected_form._fieldLookup["aft"]].properties.fields,r=!0,l=!1,s=void 0;try{for(var c,p=o.entries()[Symbol.iterator]();!(r=(c=p.next()).done);r=!0){var u=Object(y["a"])(c.value,2),d=u[0],_=u[1];if(_.type!==i.form_data[d].type||_.label!==i.form_data[d].label){alert("There was a problem duplicating the application. The template seems to have changed.");break}t.$set(_,"value",i.form_data[d].value)}}catch(m){l=!0,s=m}finally{try{r||null==p.return||p.return()}finally{if(l)throw s}}})).catch((function(t){return console.log(t)}))},get_templates:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_all_application_form_templates").then((function(e){t.application_types_user_created.splice(0,t.application_types_user_created.length),e.data.forEach((function(e){e._fields[0].properties.fields=JSON.parse(e._fields[0].properties.fields),t.application_types_user_created.push(e)})),t.copy_content_if_duplicate()})).catch((function(t){return console.log(t)}))},create_application:function(){var t=this;this.form_valid?this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/create_application",{title:this.title,recipients_employee_number:this.recipients.map((function(t){return t._fields[0].properties.employee_number})),session_id:this.$store.state.session_id,form_data:this.selected_form._fields[this.selected_form._fieldLookup["aft"]].properties.fields,template_id:this.selected_form._fields[this.selected_form._fieldLookup["aft"]].identity.low,type:this.selected_form._fields[this.selected_form._fieldLookup["aft"]].properties.label}).then((function(e){if(confirm("Application registered successfully. Send notification email to recipient?")){var i=t.recipients[0]._fields[0].properties.email_address,n=e.data[0]._fields[0].properties.type,a=t.recipients[0]._fields[0].properties.name_kanji,o=e.data[0]._fields[0].identity.low;window.location.href="\nmailto:".concat(i,"\n?subject=[自動送信] ").concat(n,"を提出しました\n&body=").concat(a,"　様%0D%0A\n%0D%0A\n提出先URL%0D%0A\nhttp://shinseimanager.mike.jtekt.maximemoreillon.com/show_application?id=").concat(o,"%0D%0A\n%0D%0A\n確認お願いします。%0D%0A\n            ")}t.$route.query.copy_of&&confirm("Delete previous application?")?t.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/delete_application",{application_id:t.$route.query.copy_of}).then((function(){return t.$router.push({name:"submitted_applications"})})).catch((function(t){return alert(t)})):t.$router.push({name:"submitted_applications"})})).catch((function(t){return alert(t)})):alert("There are missing items in this application form")},get_employees_belonging_to_node:function(t){var e=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_employees_belonging_to_node",{node_id:t}).then((function(t){return e.employees=t.data})).catch((function(t){return console.log(t)}))},delete_recipient:function(t){this.recipients.splice(t,1)},add_to_recipients:function(t){this.recipients.includes(t)?alert("Duplicates not allowed"):this.recipients.push(t)},file_upload:function(t,e){var i=this,n=new FormData;n.append("file_to_upload",t.target.files[0]),this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/file_upload",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){i.$set(e,"value",t.data)})).catch((function(t){return console.log(t)}))},delete_file:function(t){this.$set(t,"value","")}},computed:{form_valid:function(){return this.selected_form&&this.recipients.length>0&&this.title}}},J=B,z=(i("d761"),Object(p["a"])(J,b,g,!1,null,"0121cccd",null)),U=z.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("div",{staticClass:"add_button_wrapper"},[i("button",{attrs:{type:"button"},on:{click:function(e){return t.new_template()}}},[t._v("New form")])]),i("table",{staticClass:"templates_table"},[t._m(0),t._m(1),t._l(t.application_templates,(function(e){return i("tr",{staticClass:"clickable_row",on:{click:function(i){return t.view_template(e._fields[0].identity.low)}}},[i("td",[t._v(t._s(e._fields[0].properties.label))]),i("td",[t._v(t._s(e._fields[e._fieldLookup["g"]].properties.original_name))]),i("td")])})),t._m(2),t._m(3),t._l(t.shared_templates,(function(e){return i("tr",{staticClass:"clickable_row",on:{click:function(i){return t.view_template(e._fields[0].identity.low)}}},[i("td",[t._v(t._s(e._fields[0].properties.label))]),i("td",[t._v(t._s(e._fields[e._fieldLookup["g"]].properties.original_name))]),i("td",[t._v("\n        "+t._s(e._fields[e._fieldLookup["creator"]].properties.name_kanji)+"\n      ")]),i("td")])}))],2)])},V=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"header_row"},[i("th",{attrs:{colspan:"1000"}},[t._v("My forms")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("Form name")]),i("th",[t._v("Shared with")]),i("th")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"header_row"},[i("th",{attrs:{colspan:"1000"}},[t._v("Shared with me")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("Form name")]),i("th",[t._v("Shared with")]),i("th",[t._v("Author")])])}],G={name:"EditApplicationTemplate",components:{},mixins:[],data:function(){return{application_templates:[],shared_templates:[]}},mounted:function(){this.get_my_templates(),this.get_shared_templates()},methods:{get_my_templates:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_application_form_templates_from_user").then((function(e){t.application_templates.splice(0,t.application_templates.length),e.data.forEach((function(e){t.application_templates.push(e)}))})).catch((function(t){return console.log(t)}))},get_shared_templates:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_all_application_form_templates").then((function(e){t.shared_templates.splice(0,t.shared_templates.length),e.data.forEach((function(e){t.shared_templates.push(e)}))})).catch((function(t){return console.log(t)}))},view_template:function(t){this.$router.push({name:"edit_application_template",query:{id:t}})},new_template:function(){this.$router.push({name:"edit_application_template"})}},computed:{}},X=G,K=(i("9d38"),Object(p["a"])(X,W,V,!1,null,"836ee7e0",null)),Q=K.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[t.is_editable?i("div",{staticClass:"template_editor"},[i("div",{staticClass:"title_wrapper"},[i("label",{attrs:{for:""}},[t._v("申請タイトル / Title")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"label"}],attrs:{type:"text"},domProps:{value:t.label},on:{input:function(e){e.target.composing||(t.label=e.target.value)}}})]),i("div",{},[t.visibility_target?i("div",{staticClass:"visibility_header"},[t._v("\n        Sharing with "+t._s(t.visibility_target.properties.original_name)+"\n      ")]):i("div",{staticClass:"visibility_header"},[t._v("\n        Please select with whom to share\n      ")]),i("div",{staticClass:"corporate_structure"},t._l(t.divisions,(function(e){return i("CorporateStructureNode",{key:e._fields[0].identity.low,attrs:{nodeData:e,personalInformation:t.personal_information},on:{nodeSelected:function(e){return t.node_selected(e)}}})})),1)]),i("div",{staticClass:"fields_wrapper"},[i("div",{},[i("button",{attrs:{type:"button"},on:{click:function(e){return t.add_field()}}},[t._v("add field")])]),t._l(t.fields,(function(e,n){return i("div",{staticClass:"field"},[i("div",{},[i("label",{attrs:{for:""}},[t._v("ラベル / Label")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.label,expression:"field.label"}],attrs:{type:"text"},domProps:{value:e.label},on:{input:function(i){i.target.composing||t.$set(e,"label",i.target.value)}}})]),i("div",{},[i("label",{attrs:{for:""}},[t._v("タイプ / Type")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"field.type"}],on:{change:function(i){var n=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"type",i.target.multiple?n:n[0])}}},t._l(t.field_types,(function(e){return i("option",{domProps:{value:e.type}},[t._v(t._s(e.label))])})),0)]),i("button",{attrs:{type:"button"},on:{click:function(e){return t.delete_field(n)}}},[t._v("delete")])])}))],2),i("div",{staticClass:"buttons_wrapper"},[i("button",{attrs:{type:"button"},on:{click:function(e){return t.submit()}}},[t._v("submit")]),t.$route.query.id?i("button",{attrs:{type:"button"},on:{click:function(e){return t.delete_template()}}},[t._v("delete")]):t._e()])]):t.author?i("div",{staticClass:"template_editor"},[i("div",{},[t._v("\n      Title: "+t._s(t.label)+"\n    ")]),i("div",{},[i("table",{staticClass:"fields_table"},[t._m(0),t._l(t.fields,(function(e){return i("tr",[i("td",[t._v(t._s(e.label))]),i("td",[t._v(t._s(e.type))])])}))],2)]),i("div",{},[t._v("\n      Shared with: "+t._s(t.visibility_target.properties.original_name)+"\n    ")]),i("div",{staticClass:"form_author"},[t._v("\n      Form created by: "+t._s(t.author.properties.name_kanji)+"\n    ")])]):t._e()])},Z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",[t._v("Label")]),i("th",[t._v("Type")])])}],tt={name:"EditApplicationTemplate",components:{CorporateStructureNode:E},mixins:[],data:function(){return{divisions:[],personal_information:null,visibility_target:void 0,author:void 0,field_types:[{type:"text",label:"テキスト / Text"},{type:"file",label:"ファイル / File"},{type:"checkbox",label:"チェックボックス / Checkbox"},{type:"date",label:"日付 / Date"}],label:"タイトル",fields:[{type:"text",label:"label"}],template_data:{label:"",fields:[{type:"text",label:"label"}],shared_with:void 0,id:void 0}}},mounted:function(){this.get_template_if_exists(),this.get_corporate_structure()},methods:{get_template_if_exists:function(){var t=this;"id"in this.$route.query&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_application_form_template",{id:this.$route.query.id}).then((function(e){var i=JSON.parse(e.data[0]._fields[0].properties.fields);t.fields.splice(0,t.fields.length),i.forEach((function(e){return t.fields.push(e)})),t.label=e.data[0]._fields[0].properties.label,t.visibility_target=Object.assign({},t.visibility_target,e.data[0]._fields[e.data[0]._fieldLookup["g"]]),t.author=Object.assign({},t.visibility_target,e.data[0]._fields[e.data[0]._fieldLookup["creator"]])})).catch((function(t){return console.log(t)}))},add_field:function(){this.fields.push({type:"text",label:"label"})},delete_field:function(t){this.fields.splice(t,1)},submit:function(){var t=this;this.visibility_target?"id"in this.$route.query?this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/edit_application_form_template",{fields:this.fields,label:this.label,target_id:this.visibility_target.identity.low,id:this.$route.query.id}).then((function(){return t.$router.push({name:"application_template_list"})})).catch((function(t){return console.log(t)})):this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/create_application_form_template",{fields:this.fields,label:this.label,target_id:this.visibility_target.identity.low}).then((function(){return t.$router.push({name:"application_template_list"})})).catch((function(t){return console.log(t)})):alert("Did not define who to share with")},delete_template:function(t){var e=this;confirm("ホンマ？")&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/delete_application_form_template",{id:this.$route.query.id}).then((function(t){return e.$router.push({name:"application_template_list"})})).catch((function(t){return console.log(t)}))},get_corporate_structure:function(){var t=this;this.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/personal_information_v2",{}).then((function(e){t.personal_information=e.data[0],t.axios.post("http://authentication.mike.jtekt.maximemoreillon.com/get_all_divisions",{}).then((function(e){return t.divisions=e.data})).catch((function(t){return console.log(t)}))})).catch((function(t){return console.log(t)}))},node_selected:function(t){this.visibility_target=t}},computed:{is_editable:function(){if(!this.$route.query.id)return!0;if(this.personal_information&&this.author){var t=this.personal_information._fields[this.personal_information._fieldLookup["employee"]].identity.low,e=this.author.identity.low;if(t===e)return!0}return!1}}},et=tt,it=(i("b7b1"),Object(p["a"])(et,Y,Z,!1,null,"14244379",null)),nt=it.exports,at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"show_application"},[t.application?i("div",{staticClass:"application_container"},[i("div",{staticClass:"application_info"},[i("table",{},[t._m(0),i("tr",[i("td",[t._v("タイトル / Title")]),i("td",[t._v(t._s(t.application.properties.title))])]),i("tr",[i("td",[t._v("ID")]),i("td",[t._v(t._s(t.application.identity.low))])]),i("tr",[i("td",[t._v("タイプ / Type")]),i("td",[t._v(t._s(t.application.properties.type))])]),i("tr",[i("td",[t._v("日付 / Date")]),i("td",[t._v("\n            "+t._s(t.application.properties.creation_date.year.low)+"/"+t._s(t.application.properties.creation_date.month.low)+"/"+t._s(t.application.properties.creation_date.day.low)+"\n          ")])]),i("tr",[i("td",[t._v("申請者 / Applicant")]),i("td",[t._v(t._s(t.applicant.properties.name_kanji)+" ("+t._s(t.applicant.properties.employee_number)+")")])]),t._m(1),t._l(t.form_data,(function(e){return Array.isArray(t.form_data)?i("tr",[i("td",[t._v(t._s(e.label))]),"file"===e.type&&e.value?i("td",[i("span",{staticClass:"mdi mdi-download download_button",on:{click:function(i){return t.download(e.value)}}})]):"checkbox"===e.type?i("td",[e.value?i("span",{staticClass:"mdi mdi-check"}):i("span",{staticClass:"mdi mdi-close"})]):"date"===e.type?i("td",[e.value?i("span",[t._v(t._s(new Date(e.value).toLocaleDateString("ja-JP")))]):i("span",[t._v("-")])]):e.value?i("td",[t._v(t._s(e.value))]):i("td",[t._v("-")])]):t._e()})),t._l(t.form_data,(function(e,n){return Array.isArray(t.form_data)?t._e():i("tr",[i("td",[t._v(t._s(n))]),i("td","report_file"===n||"file"===n?[i("span",{staticClass:"mdi mdi-download download_button",on:{click:function(i){return t.download(e)}}})]:[t._v(t._s(e))])])}))],2),t.applicant.properties.employee_number===this.$store.state.employee_number?i("div",{staticClass:"actions_container"},[i("span",{staticClass:"mdi mdi-delete action_button",on:{click:function(e){return t.delete_application(t.application.identity.low)}}},[t._v(" Delete")]),i("span",{staticClass:"mdi mdi-content-duplicate action_button",on:{click:function(e){return t.edit_a_copy(t.application.identity.low)}}},[t._v(" Duplicate")])]):t._e()]),i("div",{staticClass:"approval_flow_column"},[i("div",{staticClass:"hanko_container_container"},t._l(t.application_records,(function(e,n){return i("div",{staticClass:"hanko_container_container_intermediate_wrapper"},[n>0?i("span",{staticClass:"arrow mdi mdi-arrow-left"}):t._e(),i("WebHankoContainer",{attrs:{applicationRecord:e,hankoable:t.hankoable(e)},on:{approve:function(e){return t.approve(t.application.identity.low)},reject:function(e){return t.reject(t.application.identity.low)},cancel:function(e){return t.cancel(t.application.identity.low)}}})],1)})),0),i("div",{staticClass:"refusal_reasons"},[i("table",t._l(t.application_records,(function(e,n){return e._fields[e._fieldLookup["rejection"]]?i("tr",[i("td",{staticClass:"refuser_name"},[t._v(t._s(e._fields[e._fieldLookup["recipient"]].properties.family_name_kanji))]),i("td",[t._v(t._s(e._fields[e._fieldLookup["rejection"]].properties.reason))])]):t._e()})),0)])])]):i("div",{staticClass:"not_found"},[t._v("Application does not exist")])])},ot=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",{attrs:{colspan:"2"}},[t._v("申請情報")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("th",{attrs:{colspan:"2"}},[t._v("申請内容")])])}],rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"web_hanko_container"},[i("div",{staticClass:"hanko_container_header",on:{click:function(e){return t.view_profile(t.recipient.properties.employee_number)}}},[t._v("\n    "+t._s(t.recipient.properties.family_name_kanji)+"\n  ")]),i("div",{staticClass:"hanko_area"},[t.approval?i("WebHanko",{attrs:{name:t.recipient.properties.family_name_kanji,approvalId:t.approval.identity.low,date:t.approval.properties.date}}):t.rejection?i("Rejection"):t._e()],1),t.show_toolbox?i("div",{staticClass:"toolbox"},[i("div",{staticClass:"approval_controls"},[i("span",{staticClass:"mdi mdi-check approve_button",on:{click:function(e){return t.$emit("approve")}}}),i("span",{staticClass:"mdi mdi-close disapprove_button",on:{click:function(e){return t.$emit("reject")}}})])]):t._e()])},lt=[],st=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"web_hanko"},[i("svg",{ref:"svg",attrs:{viewBox:"0 0 100 150"}},[i("rect",{attrs:{stroke:"#c00000","stroke-width":"2","fill-opacity":"0.0",x:"2%",y:"2%",rx:"10",ry:"10",width:"96%",height:"96%"}}),i("text",{attrs:{fill:"#c00000","text-anchor":"middle","font-family":"monospace, monospace","font-weight":"600","font-size":t.name_font_size,x:"50%",y:"20%"}},[t._v("\n      "+t._s(t.name)+"\n    ")]),i("path",{attrs:{d:t.qr_code_svg,stroke:"#c00000",transform:"\n        scale(3.80952380952)\n        translate(2.625,10.5)\n      "}}),i("line",{attrs:{stroke:"#c00000","stroke-width":"1",x1:"5%",y1:"36",x2:"95%",y2:"36"}}),i("line",{attrs:{stroke:"#c00000","stroke-width":"1",x1:"5%",y1:"125",x2:"95%",y2:"125"}}),i("text",{attrs:{fill:"#c00000","text-anchor":"middle","font-family":"monospace, monospace","font-size":"90%",x:"50%",y:"94%"}},[t._v("\n      "+t._s(String(t.date.year.low).slice(2,4))+"."+t._s(t.date.month.low)+"."+t._s(t.date.day.low)+"\n    ")])]),i("div",{staticClass:"web_hanko_actions_container"},[i("span",{staticClass:"mdi mdi-download",on:{click:function(e){return t.download()}}})])])},ct=[],pt=(i("a481"),i("7f7f"),i("6b54"),i("c5f6"),i("d055")),ut=i.n(pt),dt={name:"WebHanko",props:{name:{type:String,default:"AA"},approvalId:{type:Number,required:!1},date:{type:Object,default:function(){return{year:{low:2e3},month:{low:1},day:{low:1}}}}},data:function(){return{qr_code_svg:""}},mounted:function(){var t=this;ut.a.toString(String(this.approvalId),{margin:0,color:{dark:"#C00000",light:"#0000"}}).then((function(e){var i=new DOMParser,n=i.parseFromString(e,"image/svg+xml");t.qr_code_svg=n.getElementsByTagName("path")[0].getAttribute("d")})).catch((function(t){return console.error(t)}))},computed:{name_font_size:function(){return 55/this.name.length}},methods:{download:function(){if(window.MSInputMethodContext&&document.documentMode)alert("IE11 is too old for this feature. please use a browser of this era, such as Google Chrome, Mozilla Firefox or Microsoft Edge");else{var t=this.$refs.svg,e=document.createElement("canvas");e.width=1e3,e.height=1500;var i=e.getContext("2d"),n=(new XMLSerializer).serializeToString(t),a=window.URL||window.webkitURL||window,o=new Image,r=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),l=a.createObjectURL(r);o.onload=function(){i.drawImage(o,0,0),a.revokeObjectURL(l);var t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),n=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),r=document.createElement("a");r.setAttribute("download","approval_qr.png"),r.setAttribute("href",t),r.setAttribute("target","_blank"),r.dispatchEvent(n)},o.src=l}}}},_t=dt,mt=(i("277d"),Object(p["a"])(_t,st,ct,!1,null,"7011dfa8",null)),ft=mt.exports,ht=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},vt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"rejection"},[i("span",{staticClass:"mdi mdi-close-circle-outline"})])}],bt={name:"Rejection"},gt=bt,yt=(i("6a4b"),Object(p["a"])(gt,ht,vt,!1,null,"1d7146f7",null)),kt=yt.exports,wt={name:"WebHankoContainer",components:{WebHanko:ft,Rejection:kt},props:{applicationRecord:{type:Object,required:!0},hankoable:{type:Boolean,default:function(){return!0}}},data:function(){return{approval_status:void 0}},methods:{view_profile:function(t){window.location.href="http://employees.mike.jtekt.maximemoreillon.com/?employee_number="+t}},computed:{recipient:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["recipient"]]},approval:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["approval"]]},rejection:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["rejection"]]},submission:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["submitted_to"]]},application:function(){return this.applicationRecord._fields[this.applicationRecord._fieldLookup["application"]]},show_toolbox:function(){var t=this.$store.state.employee_number,e=this.recipient.properties.employee_number;return t===e&&!this.approval&&!this.rejection&&this.hankoable}}},xt=wt,Ct=(i("a864"),Object(p["a"])(xt,rt,lt,!1,null,"8b673a78",null)),jt=Ct.exports,At={name:"ShowApplication",components:{WebHankoContainer:jt},mounted:function(){this.get_application()},data:function(){return{application_records:[]}},methods:{get_application:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_application",{application_id:this.$route.query.id}).then((function(e){t.application_records=e.data})).catch((function(t){return console.log(t)}))},delete_application:function(t){var e=this;confirm("ホンマ？")&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/delete_application",{application_id:t}).then((function(){return e.$router.push("/")})).catch((function(t){return console.log(t)}))},approve:function(t){var e=this;confirm("ホンマ？")&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/approve_application",{application_id:t}).then((function(){var t=e.application_records.find((function(t){return t._fields[t._fieldLookup["submitted_to"]].properties.flow_index.low===e.approval_count+1}));if(t){var i=t._fields[t._fieldLookup["recipient"]];confirm("Send notification email ?")&&(window.location.href="\nmailto:".concat(i.properties.email_address,"\n?subject=[自動送信] ").concat(e.application.properties.type,"を提出しました\n&body=").concat(i.properties.name_kanji,"　様%0D%0A\n%0D%0A\n提出先URL%0D%0A\nhttp://shinseimanager.mike.jtekt.maximemoreillon.com/show_application?id=").concat(e.application.identity.low,"%0D%0A\n%0D%0A\n確認お願いします。%0D%0A\n              "))}e.get_application()})).catch((function(t){return console.log(t)}))},reject:function(t){var e=this;if(confirm("ホンマ？")){var i=prompt("なぜ？","");i&&this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/reject_application",{application_id:t,reason:i}).then((function(){return e.get_application()})).catch((function(t){return console.log(t)}))}},edit_a_copy:function(t){this.$router.push({path:"/create_application",query:{copy_of:t}})},download:function(t){window.location.href="http://shinseimanager.mike.jtekt.maximemoreillon.com/file?id="+t},see_template:function(t){this.$router.push({path:"/edit_application_template",query:{id:t}})},hankoable:function(t){var e=t._fields[t._fieldLookup["submitted_to"]].properties.flow_index.low;return e===this.approval_count}},computed:{application:function(){return this.application_records.length>0?this.application_records[0]._fields[this.application_records[0]._fieldLookup["application"]]:null},applicant:function(){return this.application_records.length>0?this.application_records[0]._fields[this.application_records[0]._fieldLookup["applicant"]]:null},template:function(){return this.application_records.length>0?this.application_records[0]._fields[this.application_records[0]._fieldLookup["aft"]]:null},form_data:function(){return JSON.parse(this.application.properties.form_data)},based_on_template:function(){return!!this.template},approval_count:function(){return this.application_records.reduce((function(t,e){return t+!!e._fields[e._fieldLookup["approval"]]}),0)}}},$t=At,Et=(i("96d3"),Object(p["a"])($t,at,ot,!1,null,"5b6768b2",null)),Lt=Et.exports,Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"submitted_applications"},[i("div",{staticClass:"new_button_wrapper"},[i("button",{attrs:{type:"button"},on:{click:t.create_new_application}},[t._v("Create new application")])]),i("ApplicationTableV2",{attrs:{applications:t.applications,hideApplicant:""}})],1)},St=[],Dt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"application_table_container"},[i("table",{staticClass:"application_table"},[t._m(0),i("ApplicationTableHeaderRow",{attrs:{hideApplicant:t.hideApplicant}}),t._l(t.applications.pending,(function(e){return i("ApplicationTableRow",{attrs:{application:e,hideApplicant:t.hideApplicant}})})),t._m(1),i("ApplicationTableHeaderRow",{attrs:{hideApplicant:t.hideApplicant}}),t._l(t.applications.rejected,(function(e){return i("ApplicationTableRow",{attrs:{application:e,hideApplicant:t.hideApplicant}})})),t._m(2),i("ApplicationTableHeaderRow",{attrs:{hideApplicant:t.hideApplicant}}),t._l(t.applications.approved,(function(e){return i("ApplicationTableRow",{attrs:{application:e,hideApplicant:t.hideApplicant}})}))],2)])},Tt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"table_section_header_row"},[i("th",{attrs:{colspan:"1000"}},[t._v("申請中 / Pending")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"table_section_header_row"},[i("th",{attrs:{colspan:"1000"}},[t._v("却下 / Rejected")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"table_section_header_row"},[i("th",{attrs:{colspan:"1000"}},[t._v("承認 / Approved")])])}],Rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{on:{click:function(e){return t.see_application(t.application._fields[t.application._fieldLookup["application"]].identity.low)}}},[i("td",[t._v(t._s(t.formatted_date))]),i("td",[t._v("\n    "+t._s(t.application._fields[t.application._fieldLookup["application"]].properties.type)+"\n  ")]),t.hideApplicant?t._e():i("td",[t._v("\n    "+t._s(t.application._fields[t.application._fieldLookup["applicant"]].properties.name_kanji)+"\n    ("+t._s(t.application._fields[t.application._fieldLookup["applicant"]].properties.employee_number)+")\n  ")]),i("td",[t._v("\n    "+t._s(t.application._fields[t.application._fieldLookup["application"]].properties.title)+"\n  ")])])},Nt=[],qt={name:"ApplicationTable",props:{application:Object,hideApplicant:{type:Boolean,default:function(){return!1}}},mixins:[],mounted:function(){},methods:{see_application:function(t){this.$router.push({name:"show_application",query:{id:t}})}},computed:{formatted_date:function(){return this.application._fields[0].properties.creation_date.year.low+"/"+this.application._fields[0].properties.creation_date.month.low+"/"+this.application._fields[0].properties.creation_date.day.low+"/"}}},Pt=qt,It=Object(p["a"])(Pt,Rt,Nt,!1,null,"2d0cb1a0",null),Mt=It.exports,Ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"headers_row"},[i("th",[t._v("日付 / Date")]),i("th",[t._v("種類 / Type")]),t.hideApplicant?t._e():i("th",[t._v("申請者 / Applicant")]),i("th",[t._v("タイトル / Title")])])},Ht=[],Bt={name:"ApplicationTableHeaderRow",props:{hideApplicant:{type:Boolean,default:function(){return!1}}}},Jt=Bt,zt=(i("206e"),Object(p["a"])(Jt,Ft,Ht,!1,null,"7cb4c36c",null)),Ut=zt.exports,Wt={name:"ApplicationTable",components:{ApplicationTableRow:Mt,ApplicationTableHeaderRow:Ut},props:{applications:Object,hideApplicant:{type:Boolean,default:function(){return!1}}},mixins:[],mounted:function(){},methods:{see_application:function(t){this.$router.push({name:"show_application",query:{id:t}})}},computed:{}},Vt=Wt,Gt=(i("51dc"),Object(p["a"])(Vt,Dt,Tt,!1,null,"14560279",null)),Xt=Gt.exports,Kt={name:"SubmittedApplications",components:{ApplicationTableV2:Xt},data:function(){return{applications:{pending:[],rejected:[],approved:[]}}},mounted:function(){this.get_all_submitted_applications()},methods:{get_all_submitted_applications:function(){this.get_submitted_applications_pending(),this.get_submitted_applications_approved(),this.get_submitted_applications_rejected()},get_submitted_applications_rejected:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/rejected",{}).then((function(e){return t.applications.rejected=e.data})).catch((function(t){return console.log(t)}))},get_submitted_applications_approved:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/approved",{}).then((function(e){return t.applications.approved=e.data})).catch((function(t){return console.log(t)}))},get_submitted_applications_pending:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_submitted_applications/pending",{}).then((function(e){return t.applications.pending=e.data})).catch((function(t){return console.log(t)}))},create_new_application:function(){this.$router.push({name:"create_application"})}}},Qt=Kt,Yt=(i("2365"),Object(p["a"])(Qt,Ot,St,!1,null,"4ae886f6",null)),Zt=Yt.exports,te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"received applications"},[i("ApplicationTableV2",{attrs:{applications:t.applications}})],1)},ee=[],ie={name:"ReceivedApplications",components:{ApplicationTableV2:Xt},data:function(){return{applications:{pending:[],rejected:[],approved:[]}}},mounted:function(){this.get_all_submitted_applications()},methods:{get_all_submitted_applications:function(){this.get_submitted_applications_pending(),this.get_submitted_applications_approved(),this.get_submitted_applications_rejected()},get_submitted_applications_rejected:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_received_applications/rejected",{}).then((function(e){return t.applications.rejected=e.data})).catch((function(t){return console.log(t)}))},get_submitted_applications_approved:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_received_applications/approved",{}).then((function(e){return t.applications.approved=e.data})).catch((function(t){return console.log(t)}))},get_submitted_applications_pending:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/get_received_applications/pending",{}).then((function(e){return t.applications.pending=e.data})).catch((function(t){return console.log(t)}))}}},ne=ie,ae=Object(p["a"])(ne,te,ee,!1,null,"55bedfd8",null),oe=ae.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("form",{on:{submit:function(e){return e.preventDefault(),t.search_application()}}},[i("label",{attrs:{for:""}},[t._v("申請検索")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.application_id,expression:"application_id"}],attrs:{type:"search",placeholder:"ID"},domProps:{value:t.application_id},on:{input:function(e){e.target.composing||(t.application_id=e.target.value)}}}),i("input",{attrs:{type:"submit"}})]),i("form",{on:{submit:function(e){return e.preventDefault(),t.search_hanko()}}},[i("label",{attrs:{for:""}},[t._v("ハンコ検索")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.hanko_id,expression:"hanko_id"}],attrs:{type:"search",placeholder:"ID"},domProps:{value:t.hanko_id},on:{input:function(e){e.target.composing||(t.hanko_id=e.target.value)}}}),i("input",{attrs:{type:"submit"}})])])},le=[],se={name:"Search",components:{},data:function(){return{application_id:"",hanko_id:""}},methods:{search_application:function(){this.$router.push({name:"show_application",query:{id:this.application_id}})},search_hanko:function(){var t=this;this.axios.post("http://shinseimanager.mike.jtekt.maximemoreillon.com/find_application_by_hanko",{approval_id:this.hanko_id}).then((function(e){e.data.length>0?t.$router.push({name:"show_application",query:{id:e.data[0]._fields[0].identity.low}}):alert("Not found")})).catch((function(t){return console.log(t)}))}}},ce=se,pe=(i("e937"),Object(p["a"])(ce,re,le,!1,null,"3be465af",null)),ue=pe.exports;n["a"].use(v["a"]);var de=new v["a"]({mode:"history",base:"",routes:[{path:"/create_application",name:"create_application",component:U,props:!0},{path:"/",name:"submitted_applications",component:Zt},{path:"/received_applications",name:"received_applications",component:oe},{path:"/show_application",name:"show_application",component:Lt},{path:"/search",name:"search",component:ue},{path:"/edit_application_template",name:"edit_application_template",component:nt},{path:"/application_template_list",name:"application_template_list",component:Q}]}),_e=i("2f62");n["a"].use(_e["a"]);var me=new _e["a"].Store({state:{employee_number:""},mutations:{set_employee_number:function(t,e){t.employee_number=e}},actions:{}}),fe=i("bc3a"),he=i.n(fe),ve=i("a7fe"),be=i.n(ve);he.a.defaults.withCredentials=!0,he.a.defaults.crossDomain=!0,n["a"].use(be.a,he.a),n["a"].config.productionTip=!1,de.beforeEach((function(t,e,i){he.a.post("http://authentication.mike.jtekt.maximemoreillon.com/status").then((function(t){t.data.logged_in?(me.commit("set_employee_number",t.data.employee_number),i()):window.location.href="http://authentication.mike.jtekt.maximemoreillon.com/"})).catch((function(t){return console.log(t)}))})),new n["a"]({router:de,store:me,render:function(t){return t(h)}}).$mount("#app")},"6a4b":function(t,e,i){"use strict";var n=i("a1a5"),a=i.n(n);a.a},"7a05":function(t,e,i){"use strict";var n=i("8e80"),a=i.n(n);a.a},"81f1":function(t,e,i){},"8e80":function(t,e,i){},"96d3":function(t,e,i){"use strict";var n=i("81f1"),a=i.n(n);a.a},"9b0c":function(t,e,i){},"9d38":function(t,e,i){"use strict";var n=i("ab19"),a=i.n(n);a.a},a1a5:function(t,e,i){},a864:function(t,e,i){"use strict";var n=i("9b0c"),a=i.n(n);a.a},ab19:function(t,e,i){},ad38:function(t,e,i){},b7b1:function(t,e,i){"use strict";var n=i("cd48"),a=i.n(n);a.a},b8cc:function(t,e,i){},cd48:function(t,e,i){},d1d1:function(t,e,i){"use strict";var n=i("f660"),a=i.n(n);a.a},d761:function(t,e,i){"use strict";var n=i("fe0f"),a=i.n(n);a.a},e386:function(t,e,i){},e602:function(t,e,i){},e937:function(t,e,i){"use strict";var n=i("e386"),a=i.n(n);a.a},f660:function(t,e,i){},fe0d:function(t,e,i){"use strict";var n=i("3776"),a=i.n(n);a.a},fe0f:function(t,e,i){}});
//# sourceMappingURL=app.cb2f1b4c.js.map